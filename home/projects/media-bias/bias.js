// Keywords
var msnbcKeywords = [
  {
    quote: "74-year-old",
    connotation: -7,
    attribution: [0]
  }, {
    quote: "socialist",
    connotation: -8,
    attribution: [0]
  }, {
    quote: "steamrolled",
    connotation: 9,
    attribution: [1]
  }, {
    quote: "facts and pragmatism",
    connotation: 7,
    attribution: [1]
  }, {
    quote: "steady stream",
    connotation: 5,
    attribution: [1]
  }, {
    quote: "outpaced",
    connotation: 4,
    attribution: [1]
  }, {
    quote: "evolved",
    connotation: 4,
    attribution: [1]
  }, {
    quote: "adroitly",
    connotation: 8,
    attribution: [1]
  }, {
    quote: "racist term",
    connotation: -8,
    attribution: [1]
  }, {
    quote: "haunted",
    connotation: -4,
    attribution: [1]
  }, {
    quote: "on the outskirts",
    connotation: -6,
    attribution: [0]
  }, {
    quote: "firey and illuminating",
    connotation: 5,
    attribution: [2]
  }, {
    quote: "most contentious",
    connotation: 3,
    attribution: [2]
  }, {
    quote: "feisty",
    connotation: -2,
    attribution: [2]
  }, {
    quote: "loud",
    connotation: -3,
    attribution: [2]
  }, {
    quote: "near yell",
    connotation: -6,
    attribution: [2]
  }, {
    quote: "sarcastic",
    connotation: -5,
    attribution: [2]
  }, {
    quote: "tough talk",
    connotation: 4,
    attribution: [1]

  // Handling dual attributions?
  /* }, {
    quote: "spoke over eachother",
    connotation:
    attribution: [0, 1]
  }, {
    quote: "like children",
    connotation:
    attribution: [0, 1]
  }, {
    quote: "glared",
    connotation:
    attribution: [0, 1]
  }, {
    quote: "rolled their eyes",
    connotation:
    attribution: [0, 1] */
  }, {

    quote: "fiercest pummeling",
    connotation: 9,
    attribution: [1]
  }, {
    quote: "swinging immediately",
    connotation: 7,
    attribution: [1]
  }, {
    quote: "out of his depth",
    connotation: -8,
    attribution: [0]
  }, {
    quote: "unable",
    connotation: -6,
    attribution: [0]
  }, {
    quote: "landed blows",
    connotation: 6,
    attribution: [1]
  }, {
    quote: "loudest applause",
    connotation: 9,
    attribution: [1]
  }, {
    quote: "speaking up for",
    connotation: 5,
    attribution: [0]
  }, {
    quote: "hawkish",
    connotation: -7,
    attribution: [1]
  }, {
    quote: "toxic well of lefty political debates",
    connotation: -10,
    attribution: [2]
  },
  // adopting positions that would be familiar to any college dorm room debater.
  // How to quote something long like this?

  // How to adapts some context to quotes?
  {
    quote: "knocked",
    connotation: 4,
    attribution: [0]
  }, {
    quote: "snubbed",
    connotation: -4,
    attribution: [0]
  }, {
    quote: "worked harder",
    connotation: 7,
    attribution: [1]
  }, {
    quote: "still doesn't have a good answer",
    connotation: -6,
    attribution: [1]
  }, {
    quote: "still doesn't have a great answer",
    connotation: -5,
    attribution: [0]
  }, {
    quote: "didn't satisfy",
    connotation: -5,
    attribution: [1]
  }
];

var nytKeywords = [
  {
    quote: "bring the noise",
    connotation: 4,
    attribution: [2]
  }, {
    quote: "louder",
    connotation: -2,
    attribution: [2]
  }, {
    quote: "snipping, snapping, jockeying",
    connotation: -2,
    attribution: [2]
  }, {
    quote: "like starving customers",
    connotation: -4,
    attribution: [2]
  }, {
    quote: "traffic jam",
    connotation: -3,
    attribution: [2]
  }, {
    quote: "'racist' use of term",
    connotation: -6,
    attribution: [1]
  }, {
    quote: "lingering headache",
    connotation: -5,
    attribution: [2]
  }, {
    quote: "cheered, booed, kibitzed",
    connotation: -4,
    attribution: [2]
  }, {
    quote: "concert fans",
    connotation: -7,
    attribution: [2]
  }, {
    quote: "ban debate audiences",
    connotation: -10,
    attribution: [2]
  }, {
    quote: "tent revivals",
    connotation: -8,
    attribution: [2]
  }, {
    quote: "heartfelt",
    connotation: 4,
    attribution: [2]
  }, {
    quote: "meaningless",
    connotation: -6,
    attribution: [2]
  }, {
    quote: "vanity mirror",
    connotation: -8,
    attribution: [2]
  }, {
    quote: "laugh track of politics",
    connotation: -7,
    attribution: [2]
  }, {
    quote: "chided the panel",
    connotation: 3,
    attribution: [1]
  }, {
    quote: "",
    connotation: 0,
    attribution: []
  }, {
    quote: "leather-lunged",
    connotation: -7,
    attribution: [2]
  }
];

var cnnKeywords = [
  {
    quote: "fight night",
    connotation: -3,
    attribution: [2]
  }, {
    quote: "heated and dramatic",
    connotation: 3,
    attribution: [2]
  }, {
    quote: "[doubt on] judgement and credibility",
    connotation: -7,
    attribution: [1]
  }, {
    quote: "[lacked] experience and pragmatism",
    connotation: -7,
    attribution: [0]
  }, {
    quote: "stoked the tension",
    connotation: -3,
    attribution: [2]
  }, {
    quote: "rowdy",
    connotation: -5,
    attribution: [2]
  }, {
    quote: "unexpectedly strong",
    connotation: 5,
    attribution: [0]
  }, {
    quote: "swinging",
    connotation: 4,
    attribution: [0]
  }, {
    quote: "on defense",
    connotation: -3,
    attribution: [0]
  }, {
    quote: "paid speeches",
    connotation: -8,
    attribution: [1]
  }, {
    quote: "counterpunched",
    connotation: 4,
    attribution: [1]
  }, {
    quote: "trouble explaining",
    connotation: -6,
    attribution: [0]
  }, {
    quote: "mocking tone",
    connotation: -6,
    attribution: [0]


    // Lots of quote choices.. how to address this?
  }, {
    quote: "turned the tables",
    connotation: 5,
    attribution: [1]
  }, {
    quote: "attack ... made forcefully",
    connotation: 4,
    attribution: [1]
  }, {
    quote: "slammed the senator",
    connotation: 6,
    attribution: [1]
  }, {
    quote: "punted",
    connotation: -4,
    attribution: [0]
  }, {
    quote: "racist term",
    connotation: -6,
    attribution: [1]
  }, {
    quote: "respect and dignity",
    connotation: 6,
    attribution: [0]
  }, {
    quote: "extensive role",
    connotation: 3,
    attribution: [1]
  }, {
    quote: "[without] fully thought out solution",
    connotation: -6,
    attribution: [0]
  }, {
    quote: "unexpectedly durable",
    connotation: 6,
    attribution: [0]
  }, {
    quote: "vulnerablilities",
    connotation: -5,
    attribution: [1]
  }, {
    quote: "longer than expected",
    connotation: -4,
    attribution: [1]
  }, {
    quote: "string of victories",
    connotation: 2,
    attribution: [0]
  }
];

var nprKeywords = [
  {
    quote: "surprises pollsters",
    connotation: 4,
    attribution: [0]
  }, {
    quote: "confounds expectations",
    connotation: 4,
    attribution: [0]
  }, {
    quote: "relentlessly aggressive",
    connotation: 7,
    attribution: [0]
  }, {
    quote: "steady stream",
    connotation: 5,
    attribution: [0]
  }, {
    quote: "defining moment",
    connotation: 4,
    attribution: [0]
  }, {
    quote: "remarkable long-shot",
    connotation: -2,
    attribution: [0]
  }, {
    quote: "beginning of the end",
    connotation: -4,
    attribution: [0]
  }, {
    quote: "angrily fired off",
    connotation: -4,
    attribution: [1]
  }, {
    // Same quote but context is different?
    // Have a context blurb?
    quote: "could not contain his sarcasm",
    connotation: 4,
    attribution: [0]
  }, {
    quote: "howls of glee [from contingent]",
    connotation: 5,
    attribution: [0]
  }, {
    quote: "high school basketball game",
    connotation: -4,
    attribution: [2]
  }, {
    quote: "defensive",
    connotation: -3,
    attribution: [1]
  }, {
    quote: "hound her",
    connotation: 3,
    attribution: [0]
  }, {
    quote: "on his heels",
    connotation: -5,
    attribution: [0]
  }, {
    quote: "",
    connotation: 1,
    attribution: []
  }
];



var data = {
  attributions: ["Bernie Sanders", "Hillary Clinton", "Quality of Debate & Crowd"],
  mediaOutlets: [
    {
      source: {
        name: "MSNBC",
        link: "http://www.msnbc.com/msnbc/sparks-fly-between-hillary-clinton-and-bernie-sanders-heated-brooklyn-debate",
        selector: "msnbc"
      },
      keywords: msnbcKeywords
    }, {
      source: {
        name: "New York Times",
        link: "http://www.nytimes.com/2016/04/16/arts/television/clinton-sanders-and-the-crowd-bring-the-noise-in-brooklyn-debate.html",
        selector: "nyt"
      },
      keywords: nytKeywords
    }, {
      source: {
        name: "CNN",
        link: "http://www.cnn.com/2016/04/14/politics/democratic-debate-brooklyn-recap/",
        selector: "cnn"
      },
      keywords: cnnKeywords
    }, {
      source: {
        name: "NPR",
        link: "http://www.npr.org/2016/04/15/474326423/latest-and-perhaps-last-debate-highlights-animosity-of-sanders-clinton",
        selector: "npr"
      },
      keywords: nprKeywords
    }
  ]
};

var getConnotationClass = function(score) {
  if (score > 7) {
    return "positive extreme";
  } else if (score > 4) {
    return "positive";
  } else if (score > 0) {
    return "positive mild";
  } else if (score >= -4) {
    return "negative mild";
  } else if (score >= -7) {
    return "negative";
  } else {
    return "negative extreme";
  }
};

var aggregateBias = function(keywords, attribution) {
  return _.reduce(keywords, function(memo, word) {
    return _.contains(word.attribution, attribution) ? memo + word.connotation : memo;
  }, 0);
}

var templateOutletFn = _.template(document.getElementById('outlet-template').innerHTML);
_.each(data.mediaOutlets, function(outlet) {
  var markup = templateOutletFn(outlet);
  document.getElementById(outlet.source.selector).innerHTML = markup;
});